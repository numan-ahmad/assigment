import{createElement as e}from"../../../../external/preact/dist/preact.js";import{useState as t,useRef as o,useEffect as r}from"../../../../external/preact/hooks/dist/hooks.js";import a from"../../../../external/classnames/index.js";import n from"./components/AchSecuredFields.js";import l from"../../../internal/SecuredFields/SFP/SecuredFieldsProvider.js";import s from"../../../internal/FormFields/Field/Field.js";import c from"../../../internal/LoadingWrapper/LoadingWrapper.js";import i from"./defaultProps.js";import d from"./defaultStyles.js";import{useCoreContext as u}from"../../../../core/Context/CoreProvider.js";import m from"../../../internal/StoreDetails/StoreDetails.js";import h from"../../../internal/FormFields/InputText.js";import p from"../../../internal/FormInstruction/FormInstruction.js";import f from"../../../internal/FormFields/RadioGroup/RadioGroup.js";function y(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function N(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},r=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),r.forEach((function(t){y(e,t,o[t])}))}return e}function g(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t.push.apply(t,o)}return t}(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))})),e}function b(e,t=!1){return!t||!!e&&"string"==typeof e&&e.trim().length>0}function F(i){const{i18n:y}=u(),F=i.hasHolderName&&(!!i.holderName||!!i.data.holderName),[O,v]=t({}),[_,k]=t(N({},i.holderNameRequired&&{holderName:F})),[P,S]=t(N({bankAccountType:"checking"},i.hasHolderName&&{holderName:i.holderName||i.data.holderName})),[w,x]=t(!1),[C,R]=t(""),[q,A]=t(!1),E=e=>{const t=e.target.value;S(g(N({},P),{holderName:t})),v(g(N({},O),{holderName:!!i.holderNameRequired&&!b(t)})),k(g(N({},_),{holderName:!i.holderNameRequired||b(t,i.holderNameRequired)}))},T=e=>{const t=e.target.value;S(g(N({},P),{bankAccountType:t}))},V=o(null),[D,H]=t("ready"),I=o({});var L;Object.keys(I.current).length||(null===(L=i.setComponentRef)||void 0===L||L.call(i,I.current));return I.current.showValidation=()=>{V.current.showValidation(),i.holderNameRequired&&!_.holderName&&v(g(N({},O),{holderName:!0}))},I.current.setStatus=H,r((()=>(this.setFocusOn=V.current.setFocusOn,this.updateStyles=V.current.updateStyles,()=>{V.current.destroy()})),[]),r((()=>{const e=b(P.holderName,i.holderNameRequired),t=w&&e;i.onChange({data:P,isValid:t,storePaymentMethod:q})}),[P,_,O,q]),e("div",{className:"adyen-checkout__ach"},e(p,null),e(l,g(N({ref:V},j(i)),{styles:N({},d,i.styles),onChange:e=>{const t=e,o=t.autoCompleteName?t.autoCompleteName:P.holderName;S(g(N({},P,t.data),{holderName:o})),v(N({},O,t.errors)),k(g(N({},_,t.valid),{holderName:!i.holderNameRequired||b(o,i.holderNameRequired)})),x(t.isSfpValid)},onFocus:e=>{const t=!0===e.focus;R(e.currentFocusObject),t?i.onFocus(e):i.onBlur(e)},render:({setRootNode:t,setFocusOn:o},r)=>{var l;return e("div",{ref:t,className:"adyen-checkout__ach-input sf-input__wrapper"},e(c,{status:r.status},e("div",{className:a(["adyen-checkout__fieldset","adyen-checkout__fieldset--ach"])},e("div",{className:"adyen-checkout__fieldset__title"},y.get("ach.bankAccount")),e(s,{classNameModifiers:["bankAccountType","no-borders"],name:"bankAccountType",useLabelElement:!1},e(f,{name:"bankAccountType",value:P.bankAccountType,items:[{id:"checking",name:y.get("ach.checking")},{id:"savings",name:y.get("ach.savings")}],onChange:T,required:!0,style:"button"})),i.hasHolderName&&e(s,{label:y.get("ach.accountHolderNameField.title"),className:"adyen-checkout__pm__holderName",errorMessage:!!O.holderName&&y.get("ach.accountHolderNameField.invalid"),showContextualElement:i.showContextualElement,contextualText:y.get("ach.accountHolderNameField.contextualText"),isValid:!!_.holderName,name:"holderName"},e(h,{className:"adyen-checkout__pm__holderName__input adyen-checkout__input",placeholder:null==i||null===(l=i.placeholders)||void 0===l?void 0:l.holderName,value:P.holderName,required:i.holderNameRequired,onInput:E})),e(n,{focusedElement:C,onFocusField:o,errors:r.errors,valid:r.valid})),i.enableStoreDetails&&e(m,{onChange:A})))}})),i.showPayButton&&i.payButton({status:D,label:y.get("confirmPurchase")}))}F.defaultProps=i;const j=e=>({autoFocus:e.autoFocus,clientKey:e.clientKey,i18n:e.i18n,keypadFix:e.keypadFix,legacyInputMode:e.legacyInputMode,loadingContext:e.loadingContext,onAllValid:e.onAllValid,onConfigSuccess:e.onConfigSuccess,onError:e.onError,onFieldValid:e.onFieldValid,onFocus:e.onFocus,onLoad:e.onLoad,showWarnings:e.showWarnings,styles:e.styles,type:e.type,forceCompat:e.forceCompat,resources:e.resources,placeholders:e.placeholders,handleKeyPress:e.handleKeyPress});export{F as default};
//# sourceMappingURL=AchInput.js.map
