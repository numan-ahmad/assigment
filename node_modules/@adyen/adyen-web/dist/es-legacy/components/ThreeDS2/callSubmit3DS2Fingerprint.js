import{httpPost as e}from"../../core/Services/http.js";import{pick as t}from"../../utils/commonUtils.js";import{THREEDS2_ERROR as n,THREEDS2_FINGERPRINT_SUBMIT as o}from"./constants.js";import{Analytics3DS2Errors as r,ANALYTICS_ERROR_TYPE as i}from"../../core/Analytics/constants.js";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s({data:s}){e({path:`v1/submitThreeDS2Fingerprint?token=${this.props.clientKey}`,loadingContext:this.props.loadingContext,errorLevel:"fatal"},function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){a(e,t,n[t])}))}return e}({},s)).then((e=>{var a,s;let c;if("completed"===e.type){const{details:t}=e;return e.details?this.onComplete({data:{details:t}}):(console.debug('Handled Error::callSubmit3DS2Fingerprint::FAILED:: no details object in a response indicating either a "frictionless" flow, or a "refused" response. resData=',e),c={type:n,code:r.NO_DETAILS_FOR_FRICTIONLESS_OR_REFUSED,errorType:i.apiError,message:`${o}: no details object in a response indicating either a "frictionless" flow, or a "refused" response`},void this.submitAnalytics(c))}if(!e.action)return console.debug('Handled Error::callSubmit3DS2Fingerprint::FAILED:: no action object in a response indicating a "challenge". resData=',e),c={type:n,code:r.NO_ACTION_FOR_CHALLENGE,errorType:i.apiError,message:`${o}: no action object in a response indicating a "challenge" flow`},void this.submitAnalytics(c);var l;const d=null!==(l=this.props.elementRef)&&void 0!==l?l:this;return d?"threeDS2"===(null===(a=e.action)||void 0===a?void 0:a.type)?d.handleAction(e.action,t("challengeWindowSize").from(this.props)):"redirect"===(null===(s=e.action)||void 0===s?void 0:s.type)?d.handleAction(e.action):void 0:(console.debug("Handled Error::callSubmit3DS2Fingerprint::FAILED:: no actionHandler"),c={type:n,code:r.NO_COMPONENT_FOR_ACTION,errorType:i.sdkError,message:`${o}: no component defined to handle the action response`},void this.submitAnalytics(c))})).catch((e=>{this.handleError(e)}))}export{s as default};
//# sourceMappingURL=callSubmit3DS2Fingerprint.js.map
