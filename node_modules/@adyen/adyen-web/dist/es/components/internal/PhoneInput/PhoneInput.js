import{createElement as e}from"../../../external/preact/dist/preact.js";import{useEffect as r,useCallback as o}from"../../../external/preact/hooks/dist/hooks.js";import n from"../FormFields/Field/Field.js";import t from"../../../utils/useForm/useForm.js";import{useCoreContext as i}from"../../../core/Context/CoreProvider.js";import a from"../FormFields/Select/Select.js";import{phoneValidationRules as l,phoneFormatters as s}from"./validate.js";import p from"../FormFields/InputText.js";import m from"../FormFields/Fieldset/Fieldset.js";function u(u){const{i18n:h}=i(),d=u.requiredFields||[...u?.items?.length?["phonePrefix"]:[],"phoneNumber"],c=d.includes("phonePrefix")&&!!u?.items?.length,f=d.includes("phoneNumber"),{handleChangeFor:b,data:N,valid:g,errors:x,isValid:F,triggerValidation:P,setSchema:y}=t({i18n:h,...u,schema:d,defaultData:u.data,rules:l,formatters:s});r((()=>{y(d)}),[d.toString()]),r((()=>{N.phoneNumber&&b("phoneNumber","blur")(N.phoneNumber)}),[N.phonePrefix]),r((()=>{u.onChange({data:N,valid:g,errors:x,isValid:F})}),[N,g,x,F]),this.triggerValidation=P;const k=o((e=>{if(x[e]){const r="phoneNumber"===e?"phoneNumberErrorKey":"phonePrefixErrorKey",o=u[r]?u[r]:x[e].errorMessage;return h.get(o)??null}return null}),[x]);return e(m,{classNameModifiers:["phone-input"]},c&&e(n,{className:"adyen-checkout-field--phone-prefix",label:h.get("telephonePrefix"),errorMessage:k("phonePrefix"),showValidIcon:!1,isValid:g.phonePrefix,dir:"ltr",i18n:h,name:"phonePrefix"},e(a,{className:"adyen-checkout-dropdown adyen-checkout-dropdown--countrycode-selector",name:"phonePrefix",items:u.items,onChange:b("phonePrefix"),placeholder:u?.placeholders?.phonePrefix,selectedValue:N.phonePrefix})),f&&e(n,{className:"adyen-checkout-field--phone-number",label:u.phoneNumberKey?h.get(u.phoneNumberKey):h.get("telephoneNumber"),errorMessage:k("phoneNumber"),isValid:g.phoneNumber,filled:N?.phoneNumber?.length>0,dir:"ltr",i18n:h,name:"phoneNumber"},e(p,{className:"adyen-checkout__input adyen-checkout-input adyen-checkout-input--phone-number",type:"tel",name:"phoneNumber",value:N.phoneNumber,onInput:b("phoneNumber","input"),onBlur:b("phoneNumber","blur"),placeholder:u?.placeholders?.phoneNumber,autoCorrect:"off",required:!0})))}u.defaultProps={phoneLabel:"telephoneNumber"};export{u as default};
//# sourceMappingURL=PhoneInput.js.map
